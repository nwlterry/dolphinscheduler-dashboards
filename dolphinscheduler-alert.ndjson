[
  {
    "id": "vis-success-rate",
    "type": "visualization",
    "attributes": {
      "title": "Alert Send Success Rate (%)",
      "visState": "{\"title\":\"Alert Send Success Rate (%)\",\"type\":\"metric\",\"aggs\":[{\"id\":\"1\",\"type\":\"formula\",\"params\":{\"formula\":\"(sum(prometheus.metrics.dolphinscheduler_alert_send_success_count) / sum(prometheus.metrics.dolphinscheduler_alert_send_total_count)) * 100\",\"label\":\"Success Rate (%)\"},\"schema\":\"metric\"}],\"params\":{\"addTooltip\":true,\"addLegend\":false,\"type\":\"gauge\",\"gauge\":{\"colorSchema\":\"Green to Red\",\"colors\":[{\"range\":95,\"text\":\"#ff0000\"},{\"range\":99,\"text\":\"#ffff00\"},{\"range\":null,\"text\":\"#00ff00\"}]}}}",
      "kibanaSavedObjectMeta": {
        "searchSourceJSON": "{\"index\":\"prometheus.collector-whaleops-*\",\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"
      }
    },
    "references": []
  },
  {
    "id": "vis-qps",
    "type": "visualization",
    "attributes": {
      "title": "Alert Send QPS",
      "visState": "{\"title\":\"Alert Send QPS\",\"type\":\"line\",\"aggs\":[{\"id\":\"1\",\"type\":\"count\",\"schema\":\"metric\"},{\"id\":\"2\",\"type\":\"date_histogram\",\"schema\":\"segment\",\"params\":{\"field\":\"@timestamp\",\"interval\":\"2m\"}},{\"id\":\"3\",\"type\":\"derivative\",\"schema\":\"metric\",\"params\":{\"field\":\"1\"}}],\"params\":{\"addTooltip\":true,\"addLegend\":true,\"interpolate\":\"linear\"}}",
      "kibanaSavedObjectMeta": {
        "searchSourceJSON": "{\"index\":\"prometheus.collector-whaleops-*\",\"query\":{\"query\":\"prometheus.metrics.dolphinscheduler_alert_send_total_count:*\",\"language\":\"kuery\"},\"filter\":[]}"
      }
    },
    "references": []
  },
  {
    "id": "vis-avg-duration",
    "type": "visualization",
    "attributes": {
      "title": "Alert Send Avg Duration (ms)",
      "visState": "{\"title\":\"Alert Send Avg Duration (ms)\",\"type\":\"line\",\"aggs\":[{\"id\":\"1\",\"type\":\"sum\",\"schema\":\"metric\",\"params\":{\"field\":\"prometheus.metrics.dolphinscheduler_alert_send_cost_sum\"}},{\"id\":\"2\",\"type\":\"sum\",\"schema\":\"metric\",\"params\":{\"field\":\"prometheus.metrics.dolphinscheduler_alert_send_total_count\"}},{\"id\":\"3\",\"type\":\"math\",\"schema\":\"metric\",\"params\":{\"script\":\"params.one / params.two\"}}],\"params\":{\"addTooltip\":true,\"addLegend\":false}}",
      "kibanaSavedObjectMeta": {
        "searchSourceJSON": "{\"index\":\"prometheus.collector-whaleops-*\",\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"
      }
    },
    "references": []
  },
  {
    "id": "vis-status",
    "type": "visualization",
    "attributes": {
      "title": "Alert Send Status",
      "visState": "{\"title\":\"Alert Send Status\",\"type\":\"area\",\"aggs\":[{\"id\":\"1\",\"type\":\"count\",\"schema\":\"metric\"},{\"id\":\"2\",\"type\":\"date_histogram\",\"schema\":\"segment\",\"params\":{\"field\":\"@timestamp\",\"interval\":\"2m\"}},{\"id\":\"3\",\"type\":\"terms\",\"schema\":\"group\",\"params\":{\"field\":\"prometheus.labels.status\",\"size\":5,\"order\":\"desc\",\"orderBy\":\"1\"}}],\"params\":{\"addTooltip\":true,\"addLegend\":true,\"mode\":\"stacked\",\"interpolate\":\"linear\"}}",
      "kibanaSavedObjectMeta": {
        "searchSourceJSON": "{\"index\":\"prometheus.collector-whaleops-*\",\"query\":{\"query\":\"prometheus.metrics.dolphinscheduler_alert_send_total_count:*\",\"language\":\"kuery\"},\"filter\":[]}"
      }
    },
    "references": []
  },
  {
    "id": "vis-by-type",
    "type": "visualization",
    "attributes": {
      "title": "Alert Send By Type",
      "visState": "{\"title\":\"Alert Send By Type\",\"type\":\"line\",\"aggs\":[{\"id\":\"1\",\"type\":\"count\",\"schema\":\"metric\"},{\"id\":\"2\",\"type\":\"date_histogram\",\"schema\":\"segment\",\"params\":{\"field\":\"@timestamp\",\"interval\":\"2m\"}},{\"id\":\"3\",\"type\":\"terms\",\"schema\":\"group\",\"params\":{\"field\":\"prometheus.labels.alert_type\",\"size\":10,\"order\":\"desc\",\"orderBy\":\"1\"}}],\"params\":{\"addTooltip\":true,\"addLegend\":true,\"interpolate\":\"linear\"}}",
      "kibanaSavedObjectMeta": {
        "searchSourceJSON": "{\"index\":\"prometheus.collector-whaleops-*\",\"query\":{\"query\":\"prometheus.metrics.dolphinscheduler_alert_send_total_count:*\",\"language\":\"kuery\"},\"filter\":[]}"
      }
    },
    "references": []
  },
  {
    "id": "dash-ds-alert",
    "type": "dashboard",
    "attributes": {
      "title": "DolphinScheduler Alert",
      "panelsJSON": "[{\"version\":\"8.14\",\"gridPos\":{\"h\":8,\"w\":4,\"x\":0,\"y\":0},\"type\":\"visualization\",\"id\":\"vis-cost-90th\"},{\"version\":\"8.14\",\"gridPos\":{\"h\":8,\"w\":4,\"x\":4,\"y\":0},\"type\":\"visualization\",\"id\":\"vis-success-rate\"},{\"version\":\"8.14\",\"gridPos\":{\"h\":8,\"w\":4,\"x\":8,\"y\":0},\"type\":\"visualization\",\"id\":\"vis-qps\"},{\"version\":\"8.14\",\"gridPos\":{\"h\":8,\"w\":4,\"x\":12,\"y\":0},\"type\":\"visualization\",\"id\":\"vis-avg-duration\"},{\"version\":\"8.14\",\"gridPos\":{\"h\":8,\"w\":4,\"x\":16,\"y\":0},\"type\":\"visualization\",\"id\":\"vis-status\"},{\"version\":\"8.14\",\"gridPos\":{\"h\":8,\"w\":4,\"x\":20,\"y\":0},\"type\":\"visualization\",\"id\":\"vis-by-type\"}]",
      "optionsJSON": "{\"hidePanelTitles\":false,\"useMargins\":true}",
      "timeRestore": true,
      "timeFrom": "now-6h",
      "timeTo": "now",
      "refreshInterval": { "pause": false, "value": 30000 },
      "kibanaSavedObjectMeta": { "searchSourceJSON": "{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}" }
    },
    "references": [
      { "name": "panel_0", "type": "visualization", "id": "vis-cost-90th" },
      { "name": "panel_1", "type": "visualization", "id": "vis-success-rate" },
      { "name": "panel_2", "type": "visualization", "id": "vis-qps" },
      { "name": "panel_3", "type": "visualization", "id": "vis-avg-duration" },
      { "name": "panel_4", "type": "visualization", "id": "vis-status" },
      { "name": "panel_5", "type": "visualization", "id": "vis-by-type" }
    ]
  }
]
